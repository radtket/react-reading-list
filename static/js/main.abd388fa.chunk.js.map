{"version":3,"sources":["hacks/data/users.js","hacks/data/list-items.js","hacks/index.js","App/index.js","context/index.js","index.js","utils/constants.js","context/list-item-context.js","components/ErrorMessage.js","utils/api-client.js","context/user-context.js","utils/auth-client.js","utils/bootstrapAppData.js","context/auth-context.js","utils/list-items-client.js","components/FullPageSpinner.js","utils/helpers.js","components/BookCard/CardButtons.js","components/BookCard/CardRating.js","types.js","components/BookCard/BookCardList.js","components/BookCard/BookCardHorizontal.js","components/BookCard/BookCardVertical.js","components/Spinner.js","components/BookNotes.js","components/ListItemList.js","components/Logo.js","components/SearchBar.js","components/index.js"],"names":["users","persist","window","localStorage","setItem","usersKey","JSON","stringify","load","Object","assign","parse","getItem","error","siteKey","purgeUsers","keys","forEach","key","authenticate","username","password","id","hash","user","passwordHash","token","btoa","Error","create","read","validateUser","str","i","length","charCodeAt","String","listItems","listItemsKey","purgeListItems","authorize","userId","listItemId","ownerId","bookId","required","rating","notes","startDate","Date","now","finishDate","validateListItem","update","updates","readMany","listItemIds","map","readByOwner","values","filter","li","originalFetch","fetch","sleep","t","Math","random","Promise","resolve","setTimeout","apiUrl","URL","process","getBooksNotInUsersList","bookIdsInUsersList","allBooks","book","includes","getSubjectId","url","pathname","split","Boolean","slice","getUser","config","headers","Authorization","replace","atob","isApi","endpoint","method","queryParam","origin","search","startsWith","prototype","hasOwnProperty","call","qs","fakeResponses","test","handler","body","status","json","a","userFields","description","query","matchingBooks","matchSorter","threshold","rankings","CONTAINS","array","sort","books","find","item","idsToRead","decodeURIComponent","lis","listItemsAndBooks","listItem","updatedListItem","success","args","groupTitle","response","console","groupCollapsed","info","groupEnd","rejection","message","reject","loadAuthenticatedApp","AuthenticatedApp","lazy","UnauthenticatedApp","App","useUser","useEffect","fallback","AppProviders","children","theme","createMuiTheme","ReactDOM","render","ThemeProvider","document","getElementById","localStorageKey","ListItemStateContext","createContext","ListItemDispatchContext","listReducer","action","type","ListItemProvider","data","useAuth","useReducer","state","dispatch","Provider","value","removeListItem","remove","then","addListItem","listItemData","updateListItem","useListItemDispatch","context","useContext","undefined","useListItemState","useSingleListItemState","ErrorMessage","networkError","result","errors","errorItem","by","padding","style","border","borderLeft","data-test","margin","component","mr","defaultProps","client","customConfig","r","UserContext","UserProvider","handleUserResponse","logout","removeItem","catch","bootstrapAppData","readForUser","AuthContext","AuthProvider","useState","firstAttemptFinished","setFirstAttemptFinished","useAsync","promiseFn","isRejected","isPending","isSettled","reload","useLayoutEffect","FullPageSpinner","login","form","register","encodeURIComponent","size","alignItems","display","height","justifyContent","slugify","toLowerCase","isArrayEmpty","arrayArg","CardButtons","CardActions","Tooltip","title","IconButton","aria-label","onClick","Book","Check","Remove","Add","updateRating","PropTypes","shape","author","string","coverImageUrl","pageCount","number","publisher","synopsis","oneOfType","CardRating","setValue","deferFn","run","debouncedRun","useCallback","debounceFn","wait","Rating","name","onChange","event","newValue","formatDate","date","Intl","DateTimeFormat","month","year","format","BookCardList","List","dense","ListItem","ListItemIcon","ListItemText","primary","secondary","useStyles","makeStyles","card","details","flexDirection","content","flex","cover","width","BookCardHorizontal","classes","Card","className","CardMedia","image","CardContent","Typography","variant","color","Box","mx","media","BookCardVertical","CardActionArea","Link","to","gutterBottom","substring","Spinner","CircularProgress","updateNotes","BookNotes","TextField","defaultValue","fullWidth","label","multiline","target","rows","ListItemList","filterListItems","noListItems","noFilteredListItems","filteredListItems","mt","Grid","container","spacing","xs","Logo","viewBox","xmlns","d","fill","root","input","marginLeft","iconButton","SearchBar","handleInputChange","handleSearchClick","onSubmit","Paper","InputBase","inputProps","placeholder"],"mappings":"2cAGA,IAAMA,EAAQ,GACRC,EAAU,kBACdC,OAAOC,aAAaC,QAAQC,IAAUC,KAAKC,UAAUP,KACjDQ,EAAO,kBACXC,OAAOC,OAAOV,EAAOM,KAAKK,MAAMT,OAAOC,aAAaS,QAAQP,QAG9D,IACEG,IACA,MAAOK,IACPZ,IAIFC,OAAOY,KAAWZ,OAAOY,MAAY,GACrCZ,OAAOY,KAASC,WAAa,WAC3BN,OAAOO,KAAKhB,GAAOiB,QAAQ,SAAAC,UAClBlB,EAAMkB,KAEfjB,KAGF,IAAMkB,EAAe,SAAC,GAA4B,IAA1BC,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC1BC,EAAKC,EAAKH,GACVI,EAAOxB,EAAMsB,IAAO,GAC1B,GAAIE,EAAKC,eAAiBF,EAAKF,GAC7B,O,qVAAO,CAAP,GAAYG,EAAZ,CAAkBE,MAAOC,KAAKH,EAAKF,MAErC,MAAM,IAAIM,MAAM,iCAGZC,EAAS,SAAC,GAA4B,IAA1BT,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACpBC,EAAKC,EAAKH,GACVK,EAAeF,EAAKF,GAC1B,GAAIrB,EAAMsB,GACR,MAAM,IAAIM,MAAJ,sDAAyDR,EAAzD,MAERpB,EAAMsB,GAAM,CAAEA,KAAIF,WAAUK,gBAC5BxB,KAGI6B,EAAO,SAAAR,GACXS,EAAaT,GADI,MAEiBtB,EAAMsB,GAFvB,EAETG,aACR,OAHiB,iCAoBbM,EAAe,SAAAT,GAEnB,GADAd,KACKR,EAAMsB,GACT,MAAM,IAAIM,MAAJ,+BAAkCN,EAAlC,OAIJC,EAAO,SAAAS,GAIX,IAHA,IAAIT,EAAO,KACPU,EAAID,EAAIE,OAELD,GACLV,EAAe,GAAPA,EAAaS,EAAIG,aAAaF,GAExC,OAAOG,OAAOb,IAAS,IC3EnBc,EAAY,GACZpC,EAAU,kBACdC,OAAOC,aAAaC,QAAQkC,IAAchC,KAAKC,UAAU8B,KACrD7B,EAAO,kBACXC,OAAOC,OACL2B,EACA/B,KAAKK,MAAMT,OAAOC,aAAaS,QAAQ0B,QAI3C,IACE9B,IACA,MAAOK,IACPZ,IAIFC,OAAOY,KAAWZ,OAAOY,MAAY,GACrCZ,OAAOY,KAASyB,eAAiB,WAC/B9B,OAAOO,KAAKqB,GAAWpB,QAAQ,SAAAC,UACtBmB,EAAUnB,KAEnBjB,KAGF,IAAMuC,EAAY,SAACC,EAAQC,GAEzB,GADiBZ,EAAKY,GACTC,UAAYF,EACvB,MAAM,IAAIb,MAAM,6CAIdC,EAAS,SAAC,GAOT,IAAD,IANJe,cAMI,MANKC,EAAS,UAMd,MALJF,eAKI,MALME,EAAS,WAKf,MAJJC,cAII,OAJM,EAIN,MAHJC,aAGI,MAHI,GAGJ,MAFJC,iBAEI,MAFQC,KAAKC,MAEb,MADJC,kBACI,MADS,KACT,EACE7B,EAAKC,EAAK,GAAD,OAAIqB,GAAJ,OAAaD,IAC5B,GAAIN,EAAUf,GACZ,MAAM,IAAIM,MAAJ,uDAIR,OAFAS,EAAUf,GAAM,CAAEA,KAAIsB,SAAQD,UAASG,SAAQC,QAAOI,aAAYH,aAClE/C,IACO6B,EAAKR,IAGRQ,EAAO,SAAAR,GAEX,OADA8B,EAAiB9B,GACVe,EAAUf,IAGb+B,EAAS,SAAC/B,EAAIgC,GAIlB,OAHAF,EAAiB9B,GACjBb,OAAOC,OAAO2B,EAAUf,GAAKgC,GAC7BrD,IACO6B,EAAKR,IAURiC,EAAW,SAACd,EAAQe,GACxB,OAAOA,EAAYC,IAAI,SAAAnC,GAErB,OADAkB,EAAUC,EAAQnB,GACXQ,EAAKR,MAIVoC,EAAc,SAAAjB,GAClB,OAAOhC,OAAOkD,OAAOtB,GAAWuB,OAAO,SAAAC,GAAE,OAAIA,EAAGlB,UAAYF,KAGxDW,EAAmB,SAAA9B,GAEvB,GADAd,KACK6B,EAAUf,GACb,MAAM,IAAIM,MAAJ,oCAAuCN,EAAvC,OAIJC,EAAO,SAAAS,GAIX,IAHA,IAAIT,EAAO,KACPU,EAAID,EAAIE,OAELD,GACLV,EAAe,GAAPA,EAAaS,EAAIG,aAAaF,GAExC,OAAOG,OAAOb,IAAS,IAGnBsB,EAAW,SAAA3B,GACf,OAAO,WACL,MAAM,IAAIU,MAAJ,UAAaV,EAAb,mB,mjBC1FV,IAAM4C,EAAgB5D,OAAO6D,MAEvBC,EAAQ,eAACC,EAAD,uDAAqB,IAAhBC,KAAKC,SAAiB,IAA3B,OACZ,IAAIC,QAAQ,SAAAC,GAAO,OAAIC,WAAWD,EAASJ,MAEvCM,EAAS,IAAIrE,OAAOsE,IAAIC,4BAExBC,EAAyB,SAAAjC,GAC7B,IAAMkC,EAAqBtC,EAAsBI,GAAQgB,IAAI,SAAAI,GAAE,OAAIA,EAAGjB,SACtE,OAAOgC,EAAShB,OAAO,SAAAiB,GAAI,OAAKF,EAAmBG,SAASD,EAAKvD,OAO7DyD,EAAe,SAAAC,GAEnB,OADqB,IAAIR,IAAIQ,GAArBC,SAELC,MAAM,KACNtB,OAAOuB,SACPC,OAAO,GAAG,IAGTC,EAAU,SAAAC,GACd,IAII7C,EAJEf,EAAQ4D,EAAOC,QAAQC,cAAcC,QAAQ,UAAW,IAC9D,IAAK/D,EACH,MAAM,IAAIE,MAAM,4BAGlB,IACEa,EAASiD,KAAKhE,GACd,MAAOb,IACP,MAAM,IAAIe,MAAM,sCAElB,OAAO5B,EAAWyC,IAGdkD,EAAQ,SAACC,GAAD,IAAWC,EAAX,uDAAoB,MAAOC,EAA3B,8CAA0C,SAACd,EAAKM,GAAY,IAAD,EAClC,IAAIpF,OAAOsE,IAAIQ,GAA5Ce,EAD+D,EAC/DA,OAAQd,EADuD,EACvDA,SAAUe,EAD6C,EAC7CA,OAE1B,OACED,IAAWxB,EAAOwB,QAClBd,EAASgB,WAAT,UAAuB1B,EAAOU,SAA9B,YAA0CW,KAC1CN,EAAOO,SAAWA,KACjBC,GACGrF,OAAOyF,UAAUC,eAAeC,KAAKC,IAAG1F,MAAMqF,GAASF,MAKzDQ,EAAgB,CACpB,CACEC,KAAMZ,EAAM,QAAS,QACfa,QAFR,iDAEgBxB,EAAKM,GAFrB,wFAGUtB,IAHV,cAIUyC,EAAOnG,KAAKK,MAAM2E,EAAOmB,MACzBjF,EAAOxB,EAAmB,CAC9BoB,SAAUqF,EAAKrF,SACfC,SAAUoF,EAAKpF,WAPrB,kBASW,CACLqF,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEpF,SAAf,yCAAF,kDAAC,KAXX,kGAeA,CACE+E,KAAMZ,EAAM,WAAY,QAClBa,QAFR,iDAEgBxB,EAAKM,GAFrB,8FAGUtB,IAHV,YAImC1D,KAAKK,MAAM2E,EAAOmB,MAAzCrF,EAJZ,EAIYA,SAAUC,EAJtB,EAIsBA,SACbD,EALT,sBAMY,IAAIQ,MAAM,0BANtB,UAQSP,EART,sBASY,IAAIO,MAAM,0BATtB,cAYI5B,EADM6G,EAAa,CAAEzF,WAAUC,aAEzBG,EAAOxB,EAAmB6G,GAbpC,kBAcW,CACLH,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEpF,SAAf,yCAAF,kDAAC,KAhBX,mGAoBA,CACEsF,YAAa,uBACbP,KAAMZ,EAAM,MACNa,QAHR,iDAGgBxB,EAAKM,GAHrB,sFAIUtB,IAJV,cAKUxC,EAAO6D,EAAQC,GALzB,kBAMW,CACLoB,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEpF,SAAf,yCAAF,kDAAC,KARX,kGAYA,CACEsF,YAAa,eACbP,KAAMZ,EAAM,OAAQ,MAAO,SACrBa,QAHR,iDAGgBxB,EAAKM,GAHrB,0FAIUtB,IAJV,gBAKsBqC,IAAG1F,MAAM,IAAIT,OAAOsE,IAAIQ,GAAKgB,QAAvCe,EALZ,EAKYA,MAGNC,EADED,EACcE,YAAYrC,EAAUmC,EAAO,CAC3C/F,KAAM,CACJ,QACA,SACA,YACA,CAAEkG,UAAWD,IAAYE,SAASC,SAAUlG,IAAK,gBApG7CmG,EA0GN3C,EAAuBW,EAAQC,GAAQhE,IAzGxC,YAAI+F,GAAOC,KAAK,kBAAMpD,KAAKC,SAAW,MA0GrCiB,MAAM,EAAG,IApBjB,kBAsBW,CACLsB,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CACjBW,MAAOP,IADH,yCAAF,kDAAC,KAxBX,iCAvFc,IAAAK,GAuFd,+DA8BA,CACEP,YAAY,wBACZP,KAAMZ,EAAM,QACNa,QAHR,iDAGgBxB,EAAKM,GAHrB,wFAIUtB,IAJV,cAKUpB,EAASmC,EAAaC,GACtBH,EAAOD,EAAS4C,KAAK,SAAAC,GAAI,OAAIA,EAAKnG,KAAOsB,IANnD,kBAOW,CACL8D,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAE/B,SAAf,yCAAF,kDAAC,KATX,kGAaA,CACEiC,YAAa,4CACbP,KAAMZ,EAAM,YAAa,MAAO,eAC1Ba,QAHR,iDAGgBxB,EAAKM,GAHrB,yFAI4Be,IAAG1F,MAAM,IAAIT,OAAOsE,IAAIQ,GAAKgB,QAA7CxC,EAJZ,EAIYA,YACFkE,EAAYC,mBAAmBnE,GAAa0B,MAAM,KAClD1D,EAAO6D,EAAQC,GACfsC,EAAMvF,EAAmBb,EAAKF,GAAIoG,GAClCG,EAAoBD,EAAInE,IAAI,SAAAqE,GAAQ,YACrCA,EADqC,CAExCjD,KAAMD,EAAS4C,KAAK,SAAA3C,GAAI,OAAIA,EAAKvD,KAAOwG,EAASlF,aAVvD,kBAYW,CACL8D,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEvE,UAAWwF,IAA1B,yCAAF,kDAAC,KAdX,kGAkBA,CACEf,YAAa,iDACbP,KAAMZ,EAAM,YAAa,MAAO,WAC1Ba,QAHR,iDAGgBxB,EAAKM,GAHrB,+EAIU3C,EAAUgF,mBACdtB,IAAG1F,MAAM,IAAIT,OAAOsE,IAAIQ,GAAKgB,QAAQrD,UAEjCnB,EAAO6D,EAAQC,IACZhE,KAAOqB,EARpB,sBASY,IAAIf,MAAJ,eACIJ,EAAKF,GADT,0DAC6DqB,IAVzE,cAaUiF,EAAMvF,EAAsBb,EAAKF,IACjCuG,EAAoBD,EAAInE,IAAI,SAAAqE,GAAQ,YACrCA,EADqC,CAExCjD,KAAMD,EAAS4C,KAAK,SAAA3C,GAAI,OAAIA,EAAKvD,KAAOwG,EAASlF,aAhBvD,kBAkBW,CACL8D,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEvE,UAAWwF,IAA1B,yCAAF,kDAAC,KApBX,kGAwBA,CACEf,YAAa,qBACbP,KAAMZ,EAAM,YAAa,QACnBa,QAHR,iDAGgBxB,EAAKM,GAHrB,8FAIUtB,IAJV,UAKUxC,EAAO6D,EAAQC,GALzB,EAMuBhF,KAAKK,MAAM2E,EAAOmB,MAA7B7D,EANZ,EAMYA,OACFiC,EAAOD,EAAS4C,KAAK,SAAAC,GAAI,OAAIA,EAAKnG,KAAOsB,IAPnD,sBASY,IAAIhB,MAAJ,uCAA0CgB,IATtD,cAWUkF,EAAWzF,EAAiB,CAAEM,QAASnB,EAAKF,GAAIsB,WAX1D,kBAYW,CACL8D,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEkB,SAAS,KAAMA,EAAP,CAAiBjD,WAAxC,yCAAF,kDAAC,KAdX,kGAkBA,CACEiC,YAAa,qBACbP,KAAMZ,EAAM,YAAa,OACnBa,QAHR,iDAGgBxB,EAAKM,GAHrB,4FAIUtB,IAJV,cAKUxC,EAAO6D,EAAQC,GACf5C,EAAaqC,EAAaC,GAC1B1B,EAAUhD,KAAKK,MAAM2E,EAAOmB,MAClCpE,EAAoBb,EAAKF,GAAIoB,GACvBqF,EAAkB1F,EAAiBK,EAAYY,GATzD,kBAUW,CACLoD,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEkB,SAAUC,IAAzB,yCAAF,kDAAC,KAZX,kGAgBA,CACEjB,YAAa,qBACbP,KAAMZ,EAAM,YAAa,UACnBa,QAHR,iDAGgBxB,EAAKM,GAHrB,wFAIUtB,IAJV,cAKUxC,EAAO6D,EAAQC,GACf5C,EAAaqC,EAAaC,GAChC3C,EAAoBb,EAAKF,GAAIoB,GD1KjCU,EADa9B,EC4KQoB,UD1KdL,EAAUf,GACjBrB,ICiKA,kBASW,CACLyG,OAAQ,IACRC,KAAK,WAAD,2BAAE,sBAAAC,EAAA,8EAAa,CAAEoB,SAAS,IAAxB,yCAAF,kDAAC,KAXX,iCDpKa,IAAA1G,GCoKb,+DAgBA,CACEiF,KAAM,kBAAM,GACZC,QAAS,kBAAa1C,EAAa,WAAb,gBAI1B5D,OAAO6D,MAAP,qBAAe,sDAAA6C,EAAA,oEAAUqB,EAAV,yBAAUA,EAAV,iBACO3B,EAAckB,KAAK,YAAe,IAAZjB,EAAW,EAAXA,KACxC,IACE,OAAOA,EAAI,WAAJ,EAAQ0B,GACf,MAAOpH,IAEP,OAAO,KALH2F,EADK,EACLA,QAQF0B,EATO,aASYD,EAAK,GAAGpC,OATpB,eASiCoC,EAAK,IATtC,kBAWYzB,EAAO,WAAP,EAAWyB,GAXvB,UAWLE,EAXK,OAYXC,QAAQC,eAAeH,EAAY,kBACnCE,QAAQE,KAAK,WAAb,GAA2BtD,IAAKiD,EAAK,IAAOA,EAAK,KAbtC,KAcXG,QAdW,oBAeND,EAfM,SAgBLA,EAASxB,KAhBJ,kCAgByBwB,EAASxB,OAhBlC,0BAgBaA,KAhBb,mCAgB6C,GAhB7C,iEAcH2B,KAdG,UAcE,YAdF,MAkBXF,QAAQG,WAlBG,kBAmBJJ,GAnBI,yCAqBPK,EArBO,KAsBP,gBAAiB5G,QACnB4G,EAAY,CACV9B,OAAQ,IACR+B,QAAS,KAAMA,UAGnBL,QAAQC,eAAeH,EAAY,kBACnCE,QAAQE,KAAK,WAAb,GAA2BtD,IAAKiD,EAAK,IAAOA,EAAK,KACjDG,QAAQE,KAAK,aAAcE,GAC3BJ,QAAQG,WA/BG,kBAgCJnE,QAAQsE,OAAOF,IAhCX,wD,8ECnPTG,EAAuB,kBAAM,qDAC7BC,GAAmBC,eAAKF,GACxBG,GAAqBD,eAAK,kBAAM,sDAgBvBE,GAdH,WACV,IAAMvH,EAAOwH,cAMb,OAHAC,oBAAU,WACRN,KACC,IAED,kBAAC,WAAD,CAAUO,SAAU,kBAAC,IAAD,OACjB1H,EAAO,kBAACoH,GAAD,MAAuB,kBAACE,GAAD,Q,SCFtBK,GAZM,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SACtB,OACE,kBAAC,KAAD,KACE,kBAAC,IAAD,KAAeA,KCEfC,GAAQC,YAAe,IAE7BC,IAASC,OACP,kBAACC,EAAA,EAAkB,CAAEJ,UACnB,kBAAC,GAAD,KACE,kBAAC,GAAD,QAGJK,SAASC,eAAe,U,gCCpB1B,gIAAO,IAAMrH,EAAe,2BACfsH,EAAkB,sBAClB9I,EAAU,cACVT,EAAW,uB,giBCOxB,IAAMwJ,EAAuBC,0BACvBC,EAA0BD,0BAE1BE,EAAc,SAAC3H,EAAW4H,GAC9B,OAAQA,EAAOC,MACb,IAAK,MACH,MAAM,GAAN,mBAAW7H,GAAX,CAAsB4H,EAAOnC,WAE/B,IAAK,SACH,OAAOzF,EAAUuB,OAAO,SAAAC,GAAE,OAAIA,EAAGvC,KAAO2I,EAAO3I,KAEjD,IAAK,SACH,OAAOe,EAAUoB,IAAI,SAAAI,GACnB,OAAIA,EAAGvC,KAAO2I,EAAOnC,SAASxG,G,qVACrB,CAAP,GACKuC,EADL,GAEKoG,EAAOnC,UAGPjE,IAGX,QACE,MAAM,IAAIjC,MAAJ,iCAAoCqI,EAAOC,SAKjDC,EAAmB,SAAC,GAAkB,IAAhBf,EAAe,EAAfA,SAClBgB,EAASC,cAATD,KADiC,EAEfE,qBAAWN,EAAaI,EAAK/H,WAFd,mBAElCkI,EAFkC,KAE3BC,EAF2B,KAGzC,OACE,kBAACX,EAAqBY,SAAtB,CAA+BC,MAAOH,GACpC,kBAACR,EAAwBU,SAAzB,CAAkCC,MAAOF,GACtCpB,KAUHuB,EAAiB,SAACH,EAAUlJ,GAChC,OAAOsJ,YAAOtJ,GAAIuJ,KAAK,SAAAT,GAErB,OADAI,EAAS,CAAEN,KAAM,SAAU5I,OACpB8I,KAILU,EAAc,SAACN,EAAUO,GAC7B,OAAOlJ,YAAOkJ,GAAcF,KAAK,SAAAT,GAE/B,OADAI,EAAS,CAAEN,KAAM,MAAOpC,SAAUsC,EAAKtC,WAChCsC,KAILY,EAAiB,SAACR,EAAU9H,EAAYY,GAC5C,OAAOD,YAAOX,EAAYY,GAASuH,KAAK,SAAAT,GAEtC,OADAI,EAAS,CAAEN,KAAM,SAAUpC,SAAUsC,EAAKtC,WACnCsC,KAILa,EAAsB,WAC1B,IAAMC,EAAUC,qBAAWpB,GAC3B,QAAgBqB,IAAZF,EACF,MAAM,IAAItJ,MAAJ,8DAIR,OAAOsJ,GAGHG,EAAmB,WACvB,IAAMH,EAAUC,qBAAWtB,GAC3B,QAAgBuB,IAAZF,EACF,MAAM,IAAItJ,MAAJ,2DAER,OAAOsJ,GAGHI,EAAyB,SAAC,GAAgB,IAAd1I,EAAa,EAAbA,OAC1BP,EAAYgJ,IAClB,IAAKhJ,EACH,MAAM,IAAIT,MAAJ,2DAER,IAAMJ,EAAOwH,cAIb,OAHiB3G,EAAUmF,KACzB,SAAA3D,GAAE,OAAIA,EAAGlB,UAAYnB,EAAKF,IAAMuC,EAAGjB,SAAWA,M,gCCpGlD,oCAIM2I,EAAe,SAAC,GAAe,IAAb1K,EAAY,EAAZA,MACtB,OAAKA,GAAUA,EAAM4H,QAEnB5H,EAAM2K,cACN3K,EAAM2K,aAAaC,QACnB5K,EAAM2K,aAAaC,OAAOC,OAAOxJ,OAE1BrB,EAAM2K,aAAaC,OAAOC,OAAOjI,IAAI,SAAAkI,GAAS,OACnD,kBAAC,IAAD,CACEzK,IAAKyK,EACLC,GAAI,EACJC,QAAS,EACTC,MAAO,CACLC,OAAQ,gCACRC,WAAY,kBAGd,kBAAC,IAAD,CACEC,YAAU,gBACVH,MAAO,CACLI,OAAQ,IAGV,kBAAC,IAAD,CAAKC,UAAU,SAASC,GAAI,GAA5B,UAGCT,EAAUlD,QAAQhD,QAAQ,kBAAmB,QAMpD,kBAAC,IAAD,CACEmG,GAAI,EACJC,QAAS,EACTC,MAAO,CACLC,OAAQ,gCACRC,WAAY,kBAGd,kBAAC,IAAD,CACEC,YAAU,gBACVH,MAAO,CACLI,OAAQ,IAGV,kBAAC,IAAD,CAAKC,UAAU,SAASC,GAAI,GAA5B,UAGCvL,EAAM4H,QAAQhD,QAAQ,kBAAmB,MAhDX,MAsDvC8F,EAAac,aAAe,CAC1BxL,MAAO,IAQM0K,O,8mBCxCAe,IA1BA,SAAC1G,GAA8C,IAAD,yDAAP,GAA1Ba,EAAiC,EAAjCA,KAAS8F,EAAwB,wBACrD7K,EAAQxB,OAAOC,aAAaS,QAAQgJ,KACpCrE,EAAU,CAAE,eAAgB,oBAE9B7D,IACF6D,EAAQC,cAAR,iBAAkC9D,IAGpC,IAAM4D,EAAM,GACVO,OAAQY,EAAO,OAAS,OACrB8F,EAFO,CAGVhH,QAAQ,EAAD,GACFA,EADE,GAEFgH,EAAahH,WAQpB,OAJIkB,IACFnB,EAAOmB,KAAOnG,KAAKC,UAAUkG,IAGxBvG,OACJ6D,MADI,UACKU,2BADL,YACsCmB,GAAYN,GACtDuF,KAAK,SAAA2B,GAAC,OAAIA,EAAE7F,W,gCCzBjB,4FAMM8F,EAAc3C,0BAEd4C,EAAe,SAAC,GAAkB,IAAhBtD,EAAe,EAAfA,SAEZ5H,EACN6I,cADFD,KAAQ5I,KAGV,OAAO,kBAACiL,EAAYhC,SAAb,CAAsBC,MAAOlJ,GAAO4H,IAGvCJ,EAAU,WACd,IAAMkC,EAAUC,qBAAWsB,GAC3B,QAAgBrB,IAAZF,EACF,MAAM,IAAItJ,MAAJ,8CAER,OAAOsJ,I,+tsDClBHyB,EAAqB,SAAC,GAAkC,IAAD,IAA/BnL,KAAQE,EAAuB,EAAvBA,MAAUF,EAAa,yBAE3D,OADAtB,OAAOC,aAAaC,QAAQwJ,IAAiBlI,GACtCF,GAGHoL,EAAS,WAEb,OADA1M,OAAOC,aAAa0M,WAAWjD,KACxBxF,QAAQC,WAOXgB,EAAU,WAGd,OANOnF,OAAOC,aAAaS,QAAQgJ,KAU5B0C,YAAO,MAAMQ,MAAM,SAAAjM,GAExB,OADA+L,IACOxI,QAAQsE,OAAO7H,KALfuD,QAAQC,QAAQ,O,QCHZ0I,EAfO,sCAAG,kCAAAnG,EAAA,qEACJvB,IADI,UACjB+E,EADiB,gDAId,CAAE5I,KAAM,KAAMa,UAAW,KAJX,cAOfb,EAAS4I,EAAT5I,KAPe,SAQKwL,YAAYxL,EAAKF,IARtB,uBAQfe,EARe,EAQfA,UARe,kBAShB,CACLb,OACAa,cAXqB,0CAAH,qD,gECetB,IAAM4K,EAAcnD,0BAEdoD,EAAe,SAAC,GAAkB,IAAhB9D,EAAe,EAAfA,SAAe,EACmB+D,oBAAS,GAD5B,mBAC9BC,EAD8B,KACRC,EADQ,OASjCC,YAAS,CACXC,UAAWR,IAVwB,IAGnC3C,YAHmC,MAG5B,CAAE5I,KAAM,KAAMa,UAAW,IAHG,EAInCxB,EAJmC,EAInCA,MACA2M,EALmC,EAKnCA,WACAC,EANmC,EAMnCA,UACAC,EAPmC,EAOnCA,UACAC,EARmC,EAQnCA,OAWF,GANAC,0BAAgB,WACVF,GACFL,GAAwB,IAEzB,CAACK,KAECN,EAAsB,CACzB,GAAIK,EACF,OAAO,kBAACI,EAAA,EAAD,MAET,GAAIL,EACF,OAAO,kBAACjC,EAAA,EAAiB,CAAE1K,UAI/B,OACE,kBAACoM,EAAYxC,SAAb,CACEC,MAAO,CACLN,OACA0D,MAAO,SAAAC,GAAI,OFtBL,SAAC,GAA4B,IAA1B3M,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SACzB,OAAOiL,YAAO,QAAS,CAAE7F,KAAM,CAAErF,WAAUC,cAAcwJ,KACvD8B,GEoBmBmB,CAAMC,GAAMlD,KAAK8C,IAChCf,OAAQ,kBAAMA,IAAS/B,KAAK8C,IAC5BK,SAAU,SAAAD,GAAI,OFlBL,SAAC,GAA4B,IAA1B3M,EAAyB,EAAzBA,SAAUC,EAAe,EAAfA,SAC5B,OAAOiL,YAAO,WAAY,CAAE7F,KAAM,CAAErF,WAAUC,cAAcwJ,KAC1D8B,GEgBsBqB,CAASD,GAAMlD,KAAK8C,MAGvCvE,IAKDiB,EAAU,WACd,IAAMa,EAAUC,qBAAW8B,GAC3B,QAAgB7B,IAAZF,EACF,MAAM,IAAItJ,MAAJ,8CAER,OAAOsJ,I,gCCnET,4IAEMrJ,EAAS,SAAAkJ,GACb,OAAOuB,YAAO,YAAa,CAAE7F,KAAMsE,KAY/B1H,EAAS,SAACX,EAAYY,GAC1B,OAAOgJ,YAAO,aAAD,OAAc5J,GAAc,CACvCmD,OAAQ,MACRY,KAAMnD,KAIJ0J,EAAc,SAAArK,GAClB,OAAO2J,YAAO,qBAAD,OAAsB2B,mBAAmBtL,MAGlDiI,EAAS,SAAAlI,GACb,OAAO4J,YAAO,aAAD,OAAc5J,GAAc,CAAEmD,OAAQ,a,gCC3BrD,qCAIMgI,EAAkB,SAAC,GAAmB,IAAD,IAAhBK,YAAgB,MAAT,GAAS,EACzC,OACE,kBAAC,IAAD,CACEC,WAAW,SACXC,QAAQ,OACRC,OAAO,qBACPC,eAAe,UAEf,kBAAC,IAAqB,CAAEJ,WAS9BL,EAAgBxB,aAAe,CAC7B6B,KAAM,IAGOL,O,gCCzBf,gEAAO,IAAMU,EAAU,SAAAvM,GAAG,OAAIA,EAAIyD,QAAQ,OAAQ,KAAK+I,eAM1CC,EAAe,SAAAC,GAC1B,OAAIA,IAAYA,EAASxM,S,uLCkFZyM,EA5EK,SAAC,GAAgB,IAAd/L,EAAa,EAAbA,OACTD,EAAYqG,cAAhB1H,GACFkJ,EAAWS,cACXnD,EAAWwD,YAAuB,CACtC1I,WAmBF,OACE,kBAACgM,EAAA,EAAD,KACG9G,IACEA,EAAS3E,WACR,kBAAC0L,EAAA,EAAD,CAASC,MAAM,kBACb,kBAACC,EAAA,EAAD,CACEC,aAAW,iBAEXC,QAZoB,WAC9B,OAAOjE,YAAeR,EAAU1C,EAASxG,GAAI,CAAE6B,WAAY,SAajD,kBAAC+L,EAAA,EAAD,QAIJ,kBAACL,EAAA,EAAD,CAASC,MAAM,gBACb,kBAACC,EAAA,EAAD,CACEC,aAAW,eAEXC,QA9BkB,WAC5B,OAAOjE,YAAeR,EAAU1C,EAASxG,GAAI,CAAE6B,WAAYF,KAAKC,UA+BtD,kBAACiM,EAAA,EAAD,SAIPrH,EACC,kBAAC+G,EAAA,EAAD,CAASC,MAAM,oBACb,kBAACC,EAAA,EAAD,CACEC,aAAW,mBAEXC,QA7CgB,WACxB,OAAOtE,YAAeH,EAAU1C,EAASxG,MA8CjC,kBAAC8N,EAAA,EAAD,QAIJ,kBAACP,EAAA,EAAD,CAASC,MAAM,eACb,kBAACC,EAAA,EAAD,CACEC,aAAW,cAEXC,QA/Ca,WACrB,OAAOnE,YAAYN,EAAU,CAAE7H,UAASC,aAgDhC,kBAACyM,EAAA,EAAD,U,uHCjENC,GCVuBC,IAAUC,MAAM,CAC3CC,OAAQF,IAAUG,OAClBC,cAAeJ,IAAUG,OACzBpO,GAAIiO,IAAUG,OACdE,UAAWL,IAAUM,OACrBC,UAAWP,IAAUG,OACrBK,SAAUR,IAAUG,OACpBZ,MAAOS,IAAUS,UAAU,CAACT,IAAUG,OAAQH,IAAUM,WDGrC,SAAC,EAAD,GAAuC,IAArC/M,EAAoC,oBAAzB0H,EAAyB,EAAzBA,SAAU1C,EAAe,EAAfA,SAC1C,OAAOkD,YAAeR,EAAU1C,EAASxG,GAAI,CAAEwB,aAG3CmN,EAAa,SAAC,GASb,IARLpL,EAQI,EARJA,KACAjC,EAOI,EAPJA,OACAO,EAMI,EANJA,WACA7B,EAKI,EALJA,GACAyB,EAII,EAJJA,MACAJ,EAGI,EAHJA,QACAG,EAEI,EAFJA,OACAE,EACI,EADJA,UACI,EACsBmK,mBAASrK,GAD/B,mBACG4H,EADH,KACUwF,EADV,KAEE1F,EAAWS,cAFb,EAG+BqC,YAAS,CAC1C6C,QAASb,EACT9E,WACA1C,SAAU,CACRjD,OACAjC,SACAO,aACA7B,KACAyB,QACAJ,UACAG,SACAE,eAXIwK,EAHJ,EAGIA,WAAY3M,EAHhB,EAGgBA,MAAOuP,EAHvB,EAGuBA,IAerBC,EAAeC,sBAAYC,IAAWH,EAAK,CAAEI,KAAM,MAAQ,IAEjE,OACE,oCACE,kBAACC,EAAA,EAAD,CACEC,KAAK,oBACLC,SAAU,SAACC,EAAOC,GAChBX,EAASW,GACTR,EAAaQ,IAEfnG,MAAOA,IAER8C,GAAc,kBAACjC,EAAA,EAAD,CAAc1K,MAAOA,MAgB1CoP,EAAW5D,aAAe,CACxBlJ,WAAY,MAGC8M,QE7DTa,EAAa,SAAAC,GAAI,OACrB,IAAIC,KAAKC,eAAe,QAAS,CAAEC,MAAO,QAASC,KAAM,YAAaC,OACpEL,IAGEM,EAAe,SAAC,GAAkB,IAAhBvJ,EAAe,EAAfA,SACd3E,EAA0B2E,EAA1B3E,WAAYH,EAAc8E,EAAd9E,UACpB,OACE,kBAACsO,EAAA,EAAD,CAAMtC,aAAW,uBAAuBuC,OAAK,GAC3C,kBAACC,EAAA,EAAD,KACE,kBAAC3C,EAAA,EAAD,CAASC,MAAO3L,EAAa,wBAA0B,cACrD,kBAACsO,EAAA,EAAD,KACE,kBAAC,IAAD,QAGJ,kBAACC,EAAA,EAAD,CACEC,QACE,oCACGb,EAAW9N,GAAY,IACvBG,GAAU,iBAAS2N,EAAW3N,KAGnCyO,UAAWzO,EAAa,wBAA0B,gBAGtD,kBAACqO,EAAA,EAAD,KACE,kBAACE,EAAA,EAAD,KACE,kBAAC,EAAe5J,OAc1BuJ,EAAahF,aAAe,CAC1BvE,SAAU,CACR3E,WAAY,KACZH,UAAW,OAIAqO,QC9CTQ,EAAYC,YAAW,iBAAO,CAClCC,KAAM,CACJ3D,QAAS,QAEX4D,QAAS,CACP5D,QAAS,OACT6D,cAAe,UAEjBC,QAAS,CACPC,KAAM,YAERC,MAAO,CACLC,MAAO,WA4DIC,EAxDY,SAAC,GAAwB,IAAtBzN,EAAqB,EAArBA,KAAMiD,EAAe,EAAfA,SAC5ByK,EAAUV,IAEdpC,EAOE5K,EAPF4K,OACAE,EAME9K,EANF8K,cACArO,EAKEuD,EALFvD,GAEAwO,EAGEjL,EAHFiL,UACAC,EAEElL,EAFFkL,SACAjB,EACEjK,EADFiK,MAGF,OACE,kBAAC0D,EAAA,EAAD,CAAMC,UAAWF,EAAQR,MACvB,kBAACW,EAAA,EAAD,CACED,UAAWF,EAAQH,MACnBO,MAAOhD,EACPb,MAAK,UAAKA,EAAL,iBAEP,yBAAK2D,UAAWF,EAAQP,SACtB,kBAACY,EAAA,EAAD,CAAaH,UAAWF,EAAQL,SAC9B,kBAACW,EAAA,EAAD,CAAY1G,UAAU,KAAK2G,QAAQ,MAChChE,GAEH,kBAAC+D,EAAA,EAAD,CAAYE,MAAM,gBAAgBD,QAAQ,aACvCrD,EACD,kBAACuD,EAAA,EAAD,CAAK7G,UAAU,OAAO8G,GAAI,GAA1B,KAGCnD,GAGFhI,GAAY,kBAAC,EAAD,CAAcA,SAAUA,IAErC,kBAAC+K,EAAA,EAAD,CAAYC,QAAQ,SAAS/C,IAE/B,kBAAC,EAAD,CAAanN,OAAQtB,O,iBC/CvBuQ,EAAYC,YAAW,CAC3BoB,MAAO,CACL7E,OAAQ,OAuDG8E,EAnDU,SAAC,GAAc,IAAZtO,EAAW,EAAXA,KAExB4K,EAOE5K,EAPF4K,OACAE,EAME9K,EANF8K,cACI/M,EAKFiC,EALFvD,GAEAwO,EAGEjL,EAHFiL,UACAC,EAEElL,EAFFkL,SACAjB,EACEjK,EADFiK,MAGIyD,EAAUV,IACV/J,EAAWwD,YAAuB,CACtC1I,WAEF,OACE,kBAAC4P,EAAA,EAAD,KACE,kBAACY,EAAA,EAAD,KACE,kBAACV,EAAA,EAAD,CACED,UAAWF,EAAQW,MACnB/G,UAAWkH,IACXV,MAAOhD,EACPb,MAAK,UAAKA,EAAL,eACLwE,GAAE,gBAAW1Q,KAEf,kBAACgQ,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAY1G,UAAU,KAAK2G,QAAQ,MAChChE,GAEH,kBAAC+D,EAAA,EAAD,CAAYE,MAAM,gBAAgBQ,cAAY,GAC3C9D,EACD,kBAACuD,EAAA,EAAD,CAAK7G,UAAU,OAAO8G,GAAI,GAA1B,KAGCnD,GAEFhI,GAAY,kBAAC,EAAD,CAAcA,SAAUA,IACrC,kBAAC+K,EAAA,EAAD,CAAYE,MAAM,gBAAgB5G,UAAU,IAAI2G,QAAQ,SACrD/C,EAASyD,UAAU,EAAG,KADzB,SAKJ,kBAAC,EAAgB,CAAE5Q,a,kBCjEnB6Q,EAAU,SAAC,GAA0B,IAAxB3H,EAAuB,EAAvBA,MAAuB,IAAhBoC,YAAgB,MAAT,GAAS,EACxC,OAAO,kBAACwF,EAAA,EAAqB,CAAExF,OAAMpC,WASvC2H,EAAQpH,aAAe,CACrB6B,KAAM,GACNpC,MAAO,MAGM2H,QCHTE,EAAc,SAAC,EAAD,GAAsC,IAApC5Q,EAAmC,oBAAzByH,EAAyB,EAAzBA,SAAU1C,EAAe,EAAfA,SACxC,OAAOkD,YAAeR,EAAU1C,EAASxG,GAAI,CAAEyB,WAG3C6Q,EAAY,SAAC,GAAkB,IAAhB9L,EAAe,EAAfA,SACX/E,EAAU+E,EAAV/E,MACFyH,EAAWS,cAFiB,EAGYqC,YAAS,CACrD6C,QAASwD,EACTnJ,WACA1C,aAHM2F,EAH0B,EAG1BA,UAAWD,EAHe,EAGfA,WAAY3M,EAHG,EAGHA,MAAOuP,EAHJ,EAGIA,IAKhCC,EAAeC,sBAAYC,IAAWH,EAAK,CAAEI,KAAM,MAAQ,IAMjE,OAAIhD,EACK,kBAACjC,EAAA,EAAiB,CAAE1K,UAGzB4M,EACK,kBAAC,EAAD,MAIP,kBAACoG,EAAA,EAAD,CACEC,aAAc/Q,EACdgR,WAAS,EACTzS,GAAG,QACH0S,MAAM,QACNC,WAAS,EACTtD,SAnBsB,SAAC,GAAgB,IAAduD,EAAa,EAAbA,OAC3B7D,EAAa6D,EAAOxJ,QAmBlByJ,KAAK,IACLrB,QAAQ,YAkBdc,EAAUvH,aAAe,CACvBvE,SAAU,CACR3E,WAAY,KACZJ,MAAO,GACPD,OAAQ,KACRE,UAAW,OAIA4Q,Q,4BClBAQ,GAlDM,SAAC,GAIf,IAHLC,EAGI,EAHJA,gBACAC,EAEI,EAFJA,YACAC,EACI,EADJA,oBAEMlS,EAAYgJ,cACZmJ,EAAoBnS,EAAUuB,OAAOyQ,GAE3C,OAAI5F,aAAapM,GAEb,kBAAC2Q,EAAA,EAAD,CAAKyB,GAAI,KACP,kBAAC5B,EAAA,EAAD,CAAYU,cAAY,EAACT,QAAQ,MAC9BwB,IAML7F,aAAa+F,GAEb,kBAACxB,EAAA,EAAD,CAAKyB,GAAI,KACP,kBAAC5B,EAAA,EAAD,CAAYU,cAAY,EAACT,QAAQ,MAC9ByB,IAOP,kBAACvB,EAAA,EAAD,CAAKyB,GAAI,KACP,kBAACC,GAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,GACtBJ,EAAkB/Q,IAAI,SAAAqE,GAAa,IAC1BxG,EAAOwG,EAAPxG,GACR,OACE,kBAACoT,GAAA,EAAD,CAAMxT,IAAKI,EAAImG,MAAI,EAACoN,IAAE,GACpB,kBAAC,EAAqB/M,SC1C9BgN,GAAO,SAAC,GAAqC,IAAD,IAAlCzC,aAAkC,MAA1B,KAA0B,MAApBhE,cAAoB,MAAX,KAAW,EAChD,OACE,yBACEA,OAAM,UAAKA,EAAL,MACN0G,QAAQ,YACR1C,MAAK,UAAKA,EAAL,MACL2C,MAAM,8BAEN,4CACA,2BACE,0BACEC,EAAE,sEACFC,KAAK,YAEP,0BACED,EAAE,4EACFC,KAAK,YAEP,0BACED,EAAE,wHACFC,KAAK,YAEP,0BACED,EAAE,0LACFC,KAAK,YAEP,0BACED,EAAE,iMACFC,KAAK,YAEP,0BACED,EAAE,6RACFC,KAAK,YAEP,0BACED,EAAE,wEACFC,KAAK,YAEP,0BACED,EAAE,6EACFC,KAAK,YAEP,0BACED,EAAE,6HACFC,KAAK,eAYfJ,GAAKzI,aAAe,CAClBgG,MAAO,KACPhE,OAAQ,MAGKyG,U,wCClDTjD,GAAYC,YAAW,CAC3BqD,KAAM,CACJtJ,QAAS,UACTuC,QAAS,OACTD,WAAY,UAGdiH,MAAO,CACLC,WAAY,EACZlD,KAAM,GAERmD,WAAY,CACVzJ,QAAS,MA+CE0J,GA3CG,SAAC,GAOZ,IANLC,EAMI,EANJA,kBACAC,EAKI,EALJA,kBAEAjI,GAGI,EAJJC,UAII,EAHJD,YAEA3M,EACI,EADJA,MACI,EACgCgR,KAA5BsD,EADJ,EACIA,KAAMC,EADV,EACUA,MAAOE,EADjB,EACiBA,WAErB,OACE,oCACE,0BAAMI,SAAUD,GACd,kBAACE,GAAA,EAAD,CAAOlD,UAAW0C,GAChB,kBAACS,GAAA,EAAD,CACEnD,UAAW2C,EACXS,WAAY,CAAE,aAAc,sBAC5BlF,SAAU6E,EACVM,YAAY,oBAEd,kBAACjH,EAAA,EAAD,CAASC,MAAM,gBACb,kBAACC,EAAA,EAAD,CACEC,aAAW,eACXyD,UAAW6C,EACXpL,KAAK,UAEL,kBAAC,KAAD,UAKPsD,GAAc,kBAACjC,EAAA,EAAiB,CAAE1K,YC7DzC,yS","file":"static/js/main.abd388fa.chunk.js","sourcesContent":["import { usersKey, siteKey } from \"../../utils/constants\";\n\n// istanbul ignore file\nconst users = {};\nconst persist = () =>\n  window.localStorage.setItem(usersKey, JSON.stringify(users));\nconst load = () =>\n  Object.assign(users, JSON.parse(window.localStorage.getItem(usersKey)));\n\n// initialize\ntry {\n  load();\n} catch (error) {\n  persist();\n  // ignore json parse error\n}\n\nwindow[siteKey] = window[siteKey] || {};\nwindow[siteKey].purgeUsers = () => {\n  Object.keys(users).forEach(key => {\n    delete users[key];\n  });\n  persist();\n};\n\nconst authenticate = ({ username, password }) => {\n  const id = hash(username);\n  const user = users[id] || {};\n  if (user.passwordHash === hash(password)) {\n    return { ...user, token: btoa(user.id) };\n  }\n  throw new Error(\"Invalid username or password\");\n};\n\nconst create = ({ username, password }) => {\n  const id = hash(username);\n  const passwordHash = hash(password);\n  if (users[id]) {\n    throw new Error(`Cannot create a new user with the username \"${username}\"`);\n  }\n  users[id] = { id, username, passwordHash };\n  persist();\n};\n\nconst read = id => {\n  validateUser(id);\n  const { passwordHash, ...user } = users[id];\n  return user;\n};\n\nconst update = (id, updates) => {\n  validateUser(id);\n  Object.assign(users[id], updates);\n  persist();\n  return read(id);\n};\n\n// this would be called `delete` except that's a reserved word in JS :-(\nconst remove = id => {\n  validateUser(id);\n  delete users[id];\n  persist();\n};\n\nconst validateUser = id => {\n  load();\n  if (!users[id]) {\n    throw new Error(`No user with the id \"${id}\"`);\n  }\n};\n\nconst hash = str => {\n  let hash = 5381;\n  let i = str.length;\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n  return String(hash >>> 0);\n};\n\nexport { authenticate, create, read, update, remove };\n","import { listItemsKey, siteKey } from \"../../utils/constants\";\n\n// istanbul ignore file\nconst listItems = {};\nconst persist = () =>\n  window.localStorage.setItem(listItemsKey, JSON.stringify(listItems));\nconst load = () =>\n  Object.assign(\n    listItems,\n    JSON.parse(window.localStorage.getItem(listItemsKey))\n  );\n\n// initialize\ntry {\n  load();\n} catch (error) {\n  persist();\n  // ignore json parse error\n}\n\nwindow[siteKey] = window[siteKey] || {};\nwindow[siteKey].purgeListItems = () => {\n  Object.keys(listItems).forEach(key => {\n    delete listItems[key];\n  });\n  persist();\n};\n\nconst authorize = (userId, listItemId) => {\n  const listItem = read(listItemId);\n  if (listItem.ownerId !== userId) {\n    throw new Error(\"User is not authorized to view that list\");\n  }\n};\n\nconst create = ({\n  bookId = required(\"bookId\"),\n  ownerId = required(\"ownerId\"),\n  rating = -1,\n  notes = \"\",\n  startDate = Date.now(),\n  finishDate = null,\n}) => {\n  const id = hash(`${bookId}${ownerId}`);\n  if (listItems[id]) {\n    throw new Error(`This user cannot create new list item for that book`);\n  }\n  listItems[id] = { id, bookId, ownerId, rating, notes, finishDate, startDate };\n  persist();\n  return read(id);\n};\n\nconst read = id => {\n  validateListItem(id);\n  return listItems[id];\n};\n\nconst update = (id, updates) => {\n  validateListItem(id);\n  Object.assign(listItems[id], updates);\n  persist();\n  return read(id);\n};\n\n// this would be called `delete` except that's a reserved word in JS :-(\nconst remove = id => {\n  validateListItem(id);\n  delete listItems[id];\n  persist();\n};\n\nconst readMany = (userId, listItemIds) => {\n  return listItemIds.map(id => {\n    authorize(userId, id);\n    return read(id);\n  });\n};\n\nconst readByOwner = userId => {\n  return Object.values(listItems).filter(li => li.ownerId === userId);\n};\n\nconst validateListItem = id => {\n  load();\n  if (!listItems[id]) {\n    throw new Error(`No list item with the id \"${id}\"`);\n  }\n};\n\nconst hash = str => {\n  let hash = 5381;\n  let i = str.length;\n\n  while (i) {\n    hash = (hash * 33) ^ str.charCodeAt(--i);\n  }\n  return String(hash >>> 0);\n};\n\nconst required = key => {\n  return () => {\n    throw new Error(`${key} is required`);\n  };\n};\n\nexport { authorize, create, read, update, remove, readMany, readByOwner };\n","import \"stop-runaway-react-effects/hijack\";\n// istanbul ignore file\n// Please don't actually do this in a real app\n// this is here to make it easy for us to simulate making HTTP calls in this\n// little app that doesn't actually have any server element.\nimport qs from \"querystringify\";\nimport matchSorter from \"match-sorter\";\nimport allBooks from \"./data/books.json\";\nimport * as users from \"./data/users\";\nimport * as listItems from \"./data/list-items\";\n\nconst originalFetch = window.fetch;\n\nconst sleep = (t = Math.random() * 200 + 300) =>\n  new Promise(resolve => setTimeout(resolve, t));\n\nconst apiUrl = new window.URL(process.env.REACT_APP_API_URL);\n\nconst getBooksNotInUsersList = userId => {\n  const bookIdsInUsersList = listItems.readByOwner(userId).map(li => li.bookId);\n  return allBooks.filter(book => !bookIdsInUsersList.includes(book.id));\n};\n\nconst shuffle = array => {\n  return [...array].sort(() => Math.random() - 0.5);\n};\n\nconst getSubjectId = url => {\n  const { pathname } = new URL(url);\n  return pathname\n    .split(\"/\")\n    .filter(Boolean)\n    .slice(-1)[0];\n};\n\nconst getUser = config => {\n  const token = config.headers.Authorization.replace(\"Bearer \", \"\");\n  if (!token) {\n    throw new Error(\"A token must be provided\");\n  }\n  let userId;\n  try {\n    userId = atob(token);\n  } catch (error) {\n    throw new Error(\"Invalid token. Please login again.\");\n  }\n  return users.read(userId);\n};\n\nconst isApi = (endpoint, method = \"GET\", queryParam) => (url, config) => {\n  const { origin, pathname, search } = new window.URL(url);\n\n  return (\n    origin === apiUrl.origin &&\n    pathname.startsWith(`${apiUrl.pathname}/${endpoint}`) &&\n    config.method === method &&\n    (queryParam\n      ? Object.prototype.hasOwnProperty.call(qs.parse(search), queryParam)\n      : true)\n  );\n};\n\nconst fakeResponses = [\n  {\n    test: isApi(\"login\", \"POST\"),\n    async handler(url, config) {\n      await sleep();\n      const body = JSON.parse(config.body);\n      const user = users.authenticate({\n        username: body.username,\n        password: body.password,\n      });\n      return {\n        status: 200,\n        json: async () => ({ user }),\n      };\n    },\n  },\n  {\n    test: isApi(\"register\", \"POST\"),\n    async handler(url, config) {\n      await sleep();\n      const { username, password } = JSON.parse(config.body);\n      if (!username) {\n        throw new Error(\"A username is required\");\n      }\n      if (!password) {\n        throw new Error(\"A password is required\");\n      }\n      const userFields = { username, password };\n      users.create(userFields);\n      const user = users.authenticate(userFields);\n      return {\n        status: 200,\n        json: async () => ({ user }),\n      };\n    },\n  },\n  {\n    description: \"get the current user\",\n    test: isApi(\"me\"),\n    async handler(url, config) {\n      await sleep();\n      const user = getUser(config);\n      return {\n        status: 200,\n        json: async () => ({ user }),\n      };\n    },\n  },\n  {\n    description: \"search books\",\n    test: isApi(\"book\", \"GET\", \"query\"),\n    async handler(url, config) {\n      await sleep();\n      const { query } = qs.parse(new window.URL(url).search);\n      let matchingBooks;\n      if (query) {\n        matchingBooks = matchSorter(allBooks, query, {\n          keys: [\n            \"title\",\n            \"author\",\n            \"publisher\",\n            { threshold: matchSorter.rankings.CONTAINS, key: \"synopsis\" },\n          ],\n        });\n      } else {\n        // return a random assortment of 10 books not already in the user's list\n        matchingBooks = shuffle(\n          getBooksNotInUsersList(getUser(config).id)\n        ).slice(0, 10);\n      }\n      return {\n        status: 200,\n        json: async () => ({\n          books: matchingBooks,\n        }),\n      };\n    },\n  },\n  {\n    description: `get a book by it's id`,\n    test: isApi(\"book\"),\n    async handler(url, config) {\n      await sleep();\n      const bookId = getSubjectId(url);\n      const book = allBooks.find(item => item.id === bookId);\n      return {\n        status: 200,\n        json: async () => ({ book }),\n      };\n    },\n  },\n  {\n    description: \"get list items and their book by their id\",\n    test: isApi(\"list-item\", \"GET\", \"listItemIds\"),\n    async handler(url, config) {\n      const { listItemIds } = qs.parse(new window.URL(url).search);\n      const idsToRead = decodeURIComponent(listItemIds).split(\",\");\n      const user = getUser(config);\n      const lis = listItems.readMany(user.id, idsToRead);\n      const listItemsAndBooks = lis.map(listItem => ({\n        ...listItem,\n        book: allBooks.find(book => book.id === listItem.bookId),\n      }));\n      return {\n        status: 200,\n        json: async () => ({ listItems: listItemsAndBooks }),\n      };\n    },\n  },\n  {\n    description: \"get list items and their book by their ownerId\",\n    test: isApi(\"list-item\", \"GET\", \"ownerId\"),\n    async handler(url, config) {\n      const ownerId = decodeURIComponent(\n        qs.parse(new window.URL(url).search).ownerId\n      );\n      const user = getUser(config);\n      if (user.id !== ownerId) {\n        throw new Error(\n          `User ${user.id} is not authorized to load list items for user ${ownerId}`\n        );\n      }\n      const lis = listItems.readByOwner(user.id);\n      const listItemsAndBooks = lis.map(listItem => ({\n        ...listItem,\n        book: allBooks.find(book => book.id === listItem.bookId),\n      }));\n      return {\n        status: 200,\n        json: async () => ({ listItems: listItemsAndBooks }),\n      };\n    },\n  },\n  {\n    description: \"create a list item\",\n    test: isApi(\"list-item\", \"POST\"),\n    async handler(url, config) {\n      await sleep();\n      const user = getUser(config);\n      const { bookId } = JSON.parse(config.body);\n      const book = allBooks.find(item => item.id === bookId);\n      if (!book) {\n        throw new Error(`No book found with the ID of ${bookId}`);\n      }\n      const listItem = listItems.create({ ownerId: user.id, bookId });\n      return {\n        status: 200,\n        json: async () => ({ listItem: { ...listItem, book } }),\n      };\n    },\n  },\n  {\n    description: \"update a list item\",\n    test: isApi(\"list-item\", \"PUT\"),\n    async handler(url, config) {\n      await sleep();\n      const user = getUser(config);\n      const listItemId = getSubjectId(url);\n      const updates = JSON.parse(config.body);\n      listItems.authorize(user.id, listItemId);\n      const updatedListItem = listItems.update(listItemId, updates);\n      return {\n        status: 200,\n        json: async () => ({ listItem: updatedListItem }),\n      };\n    },\n  },\n  {\n    description: \"delete a list item\",\n    test: isApi(\"list-item\", \"DELETE\"),\n    async handler(url, config) {\n      await sleep();\n      const user = getUser(config);\n      const listItemId = getSubjectId(url);\n      listItems.authorize(user.id, listItemId);\n      listItems.remove(listItemId);\n      return {\n        status: 200,\n        json: async () => ({ success: true }),\n      };\n    },\n  },\n  // fallback to originalFetch\n  {\n    test: () => true,\n    handler: (...args) => originalFetch(...args),\n  },\n];\n\nwindow.fetch = async (...args) => {\n  const { handler } = fakeResponses.find(({ test }) => {\n    try {\n      return test(...args);\n    } catch (error) {\n      // ignore the error and hope everything's ok...\n      return false;\n    }\n  });\n  const groupTitle = `%c ${args[1].method} -> ${args[0]}`;\n  try {\n    const response = await handler(...args);\n    console.groupCollapsed(groupTitle, \"color: #0f9d58\");\n    console.info(\"REQUEST:\", { url: args[0], ...args[1] });\n    console.info(\"RESPONSE:\", {\n      ...response,\n      ...(response.json ? { json: await response.json() } : {}),\n    });\n    console.groupEnd();\n    return response;\n  } catch (error) {\n    let rejection = error;\n    if (error instanceof Error) {\n      rejection = {\n        status: 500,\n        message: error.message,\n      };\n    }\n    console.groupCollapsed(groupTitle, \"color: #ef5350\");\n    console.info(\"REQUEST:\", { url: args[0], ...args[1] });\n    console.info(\"REJECTION:\", rejection);\n    console.groupEnd();\n    return Promise.reject(rejection);\n  }\n};\n","import React, { lazy, Suspense, useEffect } from \"react\";\n\n// Components\nimport { FullPageSpinner } from \"../components\";\n\n// Context\nimport { useUser } from \"../context/user-context\";\n\nconst loadAuthenticatedApp = () => import(\"./AuthenticatedApp\");\nconst AuthenticatedApp = lazy(loadAuthenticatedApp);\nconst UnauthenticatedApp = lazy(() => import(\"./UnauthenticatedApp\"));\n\nconst App = () => {\n  const user = useUser();\n  // pre-load the authenticated side in the background while the user's\n  // filling out the login form.\n  useEffect(() => {\n    loadAuthenticatedApp();\n  }, []);\n  return (\n    <Suspense fallback={<FullPageSpinner />}>\n      {user ? <AuthenticatedApp /> : <UnauthenticatedApp />}\n    </Suspense>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Context\nimport { AuthProvider } from \"./auth-context\";\nimport { UserProvider } from \"./user-context\";\n\nconst AppProviders = ({ children }) => {\n  return (\n    <AuthProvider>\n      <UserProvider>{children}</UserProvider>\n    </AuthProvider>\n  );\n};\n\nAppProviders.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default AppProviders;\n","// Styles\nimport \"./hacks\";\n\n// App\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-roboto\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport { createMuiTheme } from \"@material-ui/core\";\nimport App from \"./App\";\nimport AppProviders from \"./context\";\n\nconst theme = createMuiTheme({});\n\nReactDOM.render(\n  <ThemeProvider {...{ theme }}>\n    <AppProviders>\n      <App />\n    </AppProviders>\n  </ThemeProvider>,\n  document.getElementById(\"root\")\n);\n","export const listItemsKey = \"__bookshelf_list_items__\";\nexport const localStorageKey = \"__bookshelf_token__\";\nexport const siteKey = \"__bookshelf\";\nexport const usersKey = \"__bookshelf_users__\";\n","import React, { createContext, useReducer, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Context\nimport { useAuth } from \"./auth-context\";\nimport { useUser } from \"./user-context\";\n\n// Client\nimport { create, remove, update } from \"../utils/list-items-client\";\n\nconst ListItemStateContext = createContext();\nconst ListItemDispatchContext = createContext();\n\nconst listReducer = (listItems, action) => {\n  switch (action.type) {\n    case \"add\": {\n      return [...listItems, action.listItem];\n    }\n    case \"remove\": {\n      return listItems.filter(li => li.id !== action.id);\n    }\n    case \"update\": {\n      return listItems.map(li => {\n        if (li.id === action.listItem.id) {\n          return {\n            ...li,\n            ...action.listItem,\n          };\n        }\n        return li;\n      });\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n};\n\nconst ListItemProvider = ({ children }) => {\n  const { data } = useAuth();\n  const [state, dispatch] = useReducer(listReducer, data.listItems);\n  return (\n    <ListItemStateContext.Provider value={state}>\n      <ListItemDispatchContext.Provider value={dispatch}>\n        {children}\n      </ListItemDispatchContext.Provider>\n    </ListItemStateContext.Provider>\n  );\n};\n\nListItemProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nconst removeListItem = (dispatch, id) => {\n  return remove(id).then(data => {\n    dispatch({ type: \"remove\", id });\n    return data;\n  });\n};\n\nconst addListItem = (dispatch, listItemData) => {\n  return create(listItemData).then(data => {\n    dispatch({ type: \"add\", listItem: data.listItem });\n    return data;\n  });\n};\n\nconst updateListItem = (dispatch, listItemId, updates) => {\n  return update(listItemId, updates).then(data => {\n    dispatch({ type: \"update\", listItem: data.listItem });\n    return data;\n  });\n};\n\nconst useListItemDispatch = () => {\n  const context = useContext(ListItemDispatchContext);\n  if (context === undefined) {\n    throw new Error(\n      `useListItemDispatch must be used within a ListItemProvider`\n    );\n  }\n  return context;\n};\n\nconst useListItemState = () => {\n  const context = useContext(ListItemStateContext);\n  if (context === undefined) {\n    throw new Error(`useListItemState must be used within a ListItemProvider`);\n  }\n  return context;\n};\n\nconst useSingleListItemState = ({ bookId }) => {\n  const listItems = useListItemState();\n  if (!listItems) {\n    throw new Error(`useListItemState must be used within a ListItemProvider`);\n  }\n  const user = useUser();\n  const listItem = listItems.find(\n    li => li.ownerId === user.id && li.bookId === bookId\n  );\n  return listItem;\n};\n\nexport {\n  ListItemProvider,\n  useListItemDispatch,\n  useListItemState,\n  useSingleListItemState,\n  removeListItem,\n  addListItem,\n  updateListItem,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Typography } from \"@material-ui/core\";\n\nconst ErrorMessage = ({ error }) => {\n  if (!error || !error.message) return null;\n  if (\n    error.networkError &&\n    error.networkError.result &&\n    error.networkError.result.errors.length\n  ) {\n    return error.networkError.result.errors.map(errorItem => (\n      <Box\n        key={errorItem}\n        by={2}\n        padding={2}\n        style={{\n          border: \"1px solid rgba(0, 0, 0, 0.05)\",\n          borderLeft: \"5px solid red\",\n        }}\n      >\n        <Typography\n          data-test=\"graphql-error\"\n          style={{\n            margin: 0,\n          }}\n        >\n          <Box component=\"strong\" mr={1}>\n            Shoot!\n          </Box>\n          {errorItem.message.replace(\"GraphQL error: \", \"\")}\n        </Typography>\n      </Box>\n    ));\n  }\n  return (\n    <Box\n      by={2}\n      padding={2}\n      style={{\n        border: \"1px solid rgba(0, 0, 0, 0.05)\",\n        borderLeft: \"5px solid red\",\n      }}\n    >\n      <Typography\n        data-test=\"graphql-error\"\n        style={{\n          margin: 0,\n        }}\n      >\n        <Box component=\"strong\" mr={1}>\n          Shoot!\n        </Box>\n        {error.message.replace(\"GraphQL error: \", \"\")}\n      </Typography>\n    </Box>\n  );\n};\n\nErrorMessage.defaultProps = {\n  error: {},\n};\n\nErrorMessage.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  error: PropTypes.object,\n};\n\nexport default ErrorMessage;\n","import { localStorageKey } from \"./constants\";\n\nconst client = (endpoint, { body, ...customConfig } = {}) => {\n  const token = window.localStorage.getItem(localStorageKey);\n  const headers = { \"content-type\": \"application/json\" };\n\n  if (token) {\n    headers.Authorization = `Bearer ${token}`;\n  }\n\n  const config = {\n    method: body ? \"POST\" : \"GET\",\n    ...customConfig,\n    headers: {\n      ...headers,\n      ...customConfig.headers,\n    },\n  };\n\n  if (body) {\n    config.body = JSON.stringify(body);\n  }\n\n  return window\n    .fetch(`${process.env.REACT_APP_API_URL}/${endpoint}`, config)\n    .then(r => r.json());\n};\n\nexport default client;\n","import React, { createContext, useContext } from \"react\";\nimport PropTypes from \"prop-types\";\n\n// Context\nimport { useAuth } from \"./auth-context\";\n\nconst UserContext = createContext();\n\nconst UserProvider = ({ children }) => {\n  const {\n    data: { user },\n  } = useAuth();\n\n  return <UserContext.Provider value={user}>{children}</UserContext.Provider>;\n};\n\nconst useUser = () => {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error(`useUser must be used within a UserProvider`);\n  }\n  return context;\n};\n\nUserProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport { UserProvider, useUser };\n","import client from \"./api-client\";\nimport { localStorageKey } from \"./constants\";\n\nconst handleUserResponse = ({ user: { token, ...user } }) => {\n  window.localStorage.setItem(localStorageKey, token);\n  return user;\n};\n\nconst logout = () => {\n  window.localStorage.removeItem(localStorageKey);\n  return Promise.resolve();\n};\n\nconst getToken = () => {\n  return window.localStorage.getItem(localStorageKey);\n};\n\nconst getUser = () => {\n  const token = getToken();\n\n  if (!token) {\n    return Promise.resolve(null);\n  }\n\n  return client(\"me\").catch(error => {\n    logout();\n    return Promise.reject(error);\n  });\n};\n\nconst login = ({ username, password }) => {\n  return client(\"login\", { body: { username, password } }).then(\n    handleUserResponse\n  );\n};\n\nconst register = ({ username, password }) => {\n  return client(\"register\", { body: { username, password } }).then(\n    handleUserResponse\n  );\n};\n\nexport { login, register, logout, getToken, getUser };\n","import { getUser } from \"./auth-client\";\nimport { readForUser } from \"./list-items-client\";\n\nconst bootstrapAppData = async () => {\n  const data = await getUser();\n\n  if (!data) {\n    return { user: null, listItems: [] };\n  }\n\n  const { user } = data;\n  const { listItems } = await readForUser(user.id);\n  return {\n    user,\n    listItems,\n  };\n};\n\nexport default bootstrapAppData;\n","import React, {\n  useState,\n  useContext,\n  createContext,\n  useLayoutEffect,\n} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAsync } from \"react-async\";\n\n// Components\n// import { ErrorMessage, FullPageSpinner } from \"../components\";\nimport ErrorMessage from \"../components/ErrorMessage\";\nimport FullPageSpinner from \"../components/FullPageSpinner\";\n\n// Utils\nimport bootstrapAppData from \"../utils/bootstrapAppData\";\nimport { login, register, logout } from \"../utils/auth-client\";\n\nconst AuthContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [firstAttemptFinished, setFirstAttemptFinished] = useState(false);\n  const {\n    data = { user: null, listItems: [] },\n    error,\n    isRejected,\n    isPending,\n    isSettled,\n    reload,\n  } = useAsync({\n    promiseFn: bootstrapAppData,\n  });\n\n  useLayoutEffect(() => {\n    if (isSettled) {\n      setFirstAttemptFinished(true);\n    }\n  }, [isSettled]);\n\n  if (!firstAttemptFinished) {\n    if (isPending) {\n      return <FullPageSpinner />;\n    }\n    if (isRejected) {\n      return <ErrorMessage {...{ error }} />;\n    }\n  }\n\n  return (\n    <AuthContext.Provider\n      value={{\n        data,\n        login: form => login(form).then(reload),\n        logout: () => logout().then(reload),\n        register: form => register(form).then(reload),\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nconst useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error(`useAuth must be used within a AuthProvider`);\n  }\n  return context;\n};\n\nAuthProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport { AuthProvider, useAuth };\n","import client from \"./api-client\";\n\nconst create = listItemData => {\n  return client(\"list-item\", { body: listItemData });\n};\n\nconst read = listItemIds => {\n  if (!listItemIds.length) {\n    return Promise.resolve({});\n  }\n  return client(\n    `list-item?listItemIds=${encodeURIComponent(listItemIds.join(\",\"))}`\n  );\n};\n\nconst update = (listItemId, updates) => {\n  return client(`list-item/${listItemId}`, {\n    method: \"PUT\",\n    body: updates,\n  });\n};\n\nconst readForUser = ownerId => {\n  return client(`list-item?ownerId=${encodeURIComponent(ownerId)}`);\n};\n\nconst remove = listItemId => {\n  return client(`list-item/${listItemId}`, { method: \"DELETE\" });\n};\n\nexport { create, read, remove, readForUser, update };\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, CircularProgress } from \"@material-ui/core\";\n\nconst FullPageSpinner = ({ size = 48 }) => {\n  return (\n    <Box\n      alignItems=\"center\"\n      display=\"flex\"\n      height=\"calc(100vh - 80px)\"\n      justifyContent=\"center\"\n    >\n      <CircularProgress {...{ size }} />\n    </Box>\n  );\n};\n\nFullPageSpinner.propTypes = {\n  size: PropTypes.number,\n};\n\nFullPageSpinner.defaultProps = {\n  size: 48,\n};\n\nexport default FullPageSpinner;\n","export const slugify = str => str.replace(/\\s+/g, \"-\").toLowerCase();\n\nexport const isObjectEmpty = myObject => {\n  return !Object.keys(myObject).length;\n};\n\nexport const isArrayEmpty = arrayArg => {\n  if (arrayArg && arrayArg.length) {\n    return false;\n  }\n  return true;\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CardActions, IconButton, Tooltip } from \"@material-ui/core\";\nimport { Book, Check, Add, Remove } from \"@material-ui/icons\";\nimport { useUser } from \"../../context/user-context\";\nimport {\n  addListItem,\n  removeListItem,\n  updateListItem,\n  useListItemDispatch,\n  useSingleListItemState,\n} from \"../../context/list-item-context\";\n\nconst CardButtons = ({ bookId }) => {\n  const { id: ownerId } = useUser();\n  const dispatch = useListItemDispatch();\n  const listItem = useSingleListItemState({\n    bookId,\n  });\n\n  const handleRemoveClick = () => {\n    return removeListItem(dispatch, listItem.id);\n  };\n\n  const handleMarkAsReadClick = () => {\n    return updateListItem(dispatch, listItem.id, { finishDate: Date.now() });\n  };\n\n  const handleAddClick = () => {\n    return addListItem(dispatch, { ownerId, bookId });\n  };\n\n  const handleMarkAsUnreadClick = () => {\n    return updateListItem(dispatch, listItem.id, { finishDate: null });\n  };\n\n  return (\n    <CardActions>\n      {listItem &&\n        (listItem.finishDate ? (\n          <Tooltip title=\"Unmark as read\">\n            <IconButton\n              aria-label=\"Unmark as read\"\n              // highlight={colors.yellow}\n              onClick={handleMarkAsUnreadClick}\n            >\n              <Book />\n            </IconButton>\n          </Tooltip>\n        ) : (\n          <Tooltip title=\"Mark as read\">\n            <IconButton\n              aria-label=\"Mark as read\"\n              // highlight={colors.green}\n              onClick={handleMarkAsReadClick}\n            >\n              <Check />\n            </IconButton>\n          </Tooltip>\n        ))}\n      {listItem ? (\n        <Tooltip title=\"Remove from list\">\n          <IconButton\n            aria-label=\"Remove from list\"\n            // highlight={colors.danger}\n            onClick={handleRemoveClick}\n          >\n            <Remove />\n          </IconButton>\n        </Tooltip>\n      ) : (\n        <Tooltip title=\"Add to list\">\n          <IconButton\n            aria-label=\"Add to list\"\n            // highlight={colors.indigo}\n            onClick={handleAddClick}\n          >\n            <Add />\n          </IconButton>\n        </Tooltip>\n      )}\n    </CardActions>\n  );\n};\n\nCardButtons.propTypes = {\n  bookId: PropTypes.string.isRequired,\n};\n\nexport default CardButtons;\n","import React, { useState, useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Rating from \"@material-ui/lab/Rating\";\nimport debounceFn from \"debounce-fn\";\nimport { useAsync } from \"react-async\";\nimport {\n  useListItemDispatch,\n  updateListItem,\n} from \"../../context/list-item-context\";\nimport ErrorMessage from \"../ErrorMessage\";\nimport { PropTypesBook } from \"../../types\";\n\nconst updateRating = ([rating], { dispatch, listItem }) => {\n  return updateListItem(dispatch, listItem.id, { rating });\n};\n\nconst CardRating = ({\n  book,\n  bookId,\n  finishDate,\n  id,\n  notes,\n  ownerId,\n  rating,\n  startDate,\n}) => {\n  const [value, setValue] = useState(rating);\n  const dispatch = useListItemDispatch();\n  const { isRejected, error, run } = useAsync({\n    deferFn: updateRating,\n    dispatch,\n    listItem: {\n      book,\n      bookId,\n      finishDate,\n      id,\n      notes,\n      ownerId,\n      rating,\n      startDate,\n    },\n  });\n\n  const debouncedRun = useCallback(debounceFn(run, { wait: 300 }), []);\n\n  return (\n    <>\n      <Rating\n        name=\"simple-controlled\"\n        onChange={(event, newValue) => {\n          setValue(newValue);\n          debouncedRun(newValue);\n        }}\n        value={value}\n      />\n      {isRejected && <ErrorMessage error={error} />}\n    </>\n  );\n};\n\nCardRating.propTypes = {\n  book: PropTypesBook.isRequired,\n  bookId: PropTypes.string.isRequired,\n  finishDate: PropTypes.number,\n  id: PropTypes.string.isRequired,\n  notes: PropTypes.string.isRequired,\n  ownerId: PropTypes.string.isRequired,\n  rating: PropTypes.number.isRequired,\n  startDate: PropTypes.number.isRequired,\n};\n\nCardRating.defaultProps = {\n  finishDate: null,\n};\n\nexport default CardRating;\n","import PropTypes from \"prop-types\";\n\nexport const PropTypesBook = PropTypes.shape({\n  author: PropTypes.string,\n  coverImageUrl: PropTypes.string,\n  id: PropTypes.string,\n  pageCount: PropTypes.number,\n  publisher: PropTypes.string,\n  synopsis: PropTypes.string,\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n});\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Tooltip,\n} from \"@material-ui/core\";\nimport TodayIcon from \"@material-ui/icons/Today\";\n\n// Components\nimport CardRating from \"./CardRating\";\n\nconst formatDate = date =>\n  new Intl.DateTimeFormat(\"en-US\", { month: \"short\", year: \"2-digit\" }).format(\n    date\n  );\n\nconst BookCardList = ({ listItem }) => {\n  const { finishDate, startDate } = listItem;\n  return (\n    <List aria-label=\"main mailbox folders\" dense>\n      <ListItem>\n        <Tooltip title={finishDate ? \"Start and finish date\" : \"Start date\"}>\n          <ListItemIcon>\n            <TodayIcon />\n          </ListItemIcon>\n        </Tooltip>\n        <ListItemText\n          primary={\n            <>\n              {formatDate(startDate)}{\" \"}\n              {finishDate && `— ${formatDate(finishDate)}`}\n            </>\n          }\n          secondary={finishDate ? \"Start and finish date\" : \"Start date\"}\n        />\n      </ListItem>\n      <ListItem>\n        <ListItemText>\n          <CardRating {...listItem} />\n        </ListItemText>\n      </ListItem>\n    </List>\n  );\n};\n\nBookCardList.propTypes = {\n  listItem: PropTypes.shape({\n    finishDate: PropTypes.number,\n    startDate: PropTypes.number,\n  }),\n};\n\nBookCardList.defaultProps = {\n  listItem: {\n    finishDate: null,\n    startDate: null,\n  },\n};\n\nexport default BookCardList;\n","import React from \"react\";\n// import PropTypes from \"prop-types\";\nimport {\n  Box,\n  Card,\n  CardContent,\n  CardMedia,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\n\n// Components\nimport CardButtons from \"./CardButtons\";\nimport BookCardList from \"./BookCardList\";\nimport { PropTypesBook } from \"../../types\";\n\nconst useStyles = makeStyles(() => ({\n  card: {\n    display: \"flex\",\n  },\n  details: {\n    display: \"flex\",\n    flexDirection: \"column\",\n  },\n  content: {\n    flex: \"1 0 auto\",\n  },\n  cover: {\n    width: \"100%\",\n  },\n}));\n\nconst BookCardHorizontal = ({ book, listItem }) => {\n  const classes = useStyles();\n  const {\n    author,\n    coverImageUrl,\n    id,\n    // listItem,\n    publisher,\n    synopsis,\n    title,\n  } = book;\n\n  return (\n    <Card className={classes.card}>\n      <CardMedia\n        className={classes.cover}\n        image={coverImageUrl}\n        title={`${title} book cover`}\n      />\n      <div className={classes.details}>\n        <CardContent className={classes.content}>\n          <Typography component=\"h5\" variant=\"h5\">\n            {title}\n          </Typography>\n          <Typography color=\"textSecondary\" variant=\"subtitle1\">\n            {author}\n            <Box component=\"span\" mx={1}>\n              |\n            </Box>\n            {publisher}\n          </Typography>\n\n          {listItem && <BookCardList listItem={listItem} />}\n\n          <Typography variant=\"body2\">{synopsis}</Typography>\n        </CardContent>\n        <CardButtons bookId={id} />\n      </div>\n    </Card>\n  );\n};\n\nBookCardHorizontal.propTypes = {\n  book: PropTypesBook.isRequired,\n  // listItem: PropTypes.shape({\n  //   book: PropTypesBook,\n  //   bookId: PropTypes.shape,\n  //   finishDate: PropTypes.number,\n  //   id: PropTypes.shape,\n  //   notes: PropTypes.shape,\n  //   ownerId: PropTypes.shape,\n  //   rating: PropTypes.number,\n  //   startDate: PropTypes.number,\n  // }).isRequired,\n};\n\nexport default BookCardHorizontal;\n","import React from \"react\";\nimport { Link } from \"@reach/router\";\n\n// Material UI\nimport {\n  Box,\n  Card,\n  CardActionArea,\n  CardContent,\n  CardMedia,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\n\n// Components\nimport { useSingleListItemState } from \"../../context/list-item-context\";\nimport CardRating from \"./CardRating\";\nimport CardButtons from \"./CardButtons\";\nimport { PropTypesBook } from \"../../types\";\nimport BookCardList from \"./BookCardList\";\n\nconst useStyles = makeStyles({\n  media: {\n    height: 200,\n  },\n});\n\nconst BookCardVertical = ({ book }) => {\n  const {\n    author,\n    coverImageUrl,\n    id: bookId,\n    // pageCount,\n    publisher,\n    synopsis,\n    title,\n  } = book;\n\n  const classes = useStyles();\n  const listItem = useSingleListItemState({\n    bookId,\n  });\n  return (\n    <Card>\n      <CardActionArea>\n        <CardMedia\n          className={classes.media}\n          component={Link}\n          image={coverImageUrl}\n          title={`${title} book cover`}\n          to={`/book/${bookId}`}\n        />\n        <CardContent>\n          <Typography component=\"h2\" variant=\"h5\">\n            {title}\n          </Typography>\n          <Typography color=\"textSecondary\" gutterBottom>\n            {author}\n            <Box component=\"span\" mx={1}>\n              |\n            </Box>\n            {publisher}\n          </Typography>\n          {listItem && <BookCardList listItem={listItem} />}\n          <Typography color=\"textSecondary\" component=\"p\" variant=\"body2\">\n            {synopsis.substring(0, 500)}...\n          </Typography>\n        </CardContent>\n      </CardActionArea>\n      <CardButtons {...{ bookId }} />\n    </Card>\n  );\n};\n\nBookCardVertical.propTypes = {\n  book: PropTypesBook.isRequired,\n};\n\nexport default BookCardVertical;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nconst Spinner = ({ style, size = 16 }) => {\n  return <CircularProgress {...{ size, style }} />;\n};\n\nSpinner.propTypes = {\n  size: PropTypes.number,\n  // eslint-disable-next-line react/forbid-prop-types\n  style: PropTypes.object,\n};\n\nSpinner.defaultProps = {\n  size: 16,\n  style: null,\n};\n\nexport default Spinner;\n","import React, { useCallback } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useAsync } from \"react-async\";\nimport debounceFn from \"debounce-fn\";\nimport { TextField } from \"@material-ui/core\";\n\n// Components\nimport ErrorMessage from \"./ErrorMessage\";\nimport Spinner from \"./Spinner\";\n\nimport {\n  useListItemDispatch,\n  updateListItem,\n} from \"../context/list-item-context\";\nimport { PropTypesBook } from \"../types\";\n\nconst updateNotes = ([notes], { dispatch, listItem }) => {\n  return updateListItem(dispatch, listItem.id, { notes });\n};\n\nconst BookNotes = ({ listItem }) => {\n  const { notes } = listItem;\n  const dispatch = useListItemDispatch();\n  const { isPending, isRejected, error, run } = useAsync({\n    deferFn: updateNotes,\n    dispatch,\n    listItem,\n  });\n  const debouncedRun = useCallback(debounceFn(run, { wait: 300 }), []);\n\n  const handleNotesChange = ({ target }) => {\n    debouncedRun(target.value);\n  };\n\n  if (isRejected) {\n    return <ErrorMessage {...{ error }} />;\n  }\n\n  if (isPending) {\n    return <Spinner />;\n  }\n\n  return (\n    <TextField\n      defaultValue={notes}\n      fullWidth\n      id=\"notes\"\n      label=\"Notes\"\n      multiline\n      onChange={handleNotesChange}\n      rows=\"6\"\n      variant=\"filled\"\n    />\n  );\n};\n\nBookNotes.propTypes = {\n  listItem: PropTypes.shape({\n    book: PropTypesBook.isRequired,\n    bookId: PropTypes.string.isRequired,\n    finishDate: PropTypes.number,\n    id: PropTypes.string.isRequired,\n    notes: PropTypes.string,\n    ownerId: PropTypes.string.isRequired,\n    rating: PropTypes.number,\n    startDate: PropTypes.number,\n  }),\n};\n\nBookNotes.defaultProps = {\n  listItem: {\n    finishDate: null,\n    notes: \"\",\n    rating: null,\n    startDate: null,\n  },\n};\n\nexport default BookNotes;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Box, Grid, Typography } from \"@material-ui/core\";\n\n// Components\nimport BookCardVertical from \"./BookCard/BookCardVertical\";\n\nimport { useListItemState } from \"../context/list-item-context\";\nimport { isArrayEmpty } from \"../utils/helpers\";\n\nconst ListItemList = ({\n  filterListItems,\n  noListItems,\n  noFilteredListItems,\n}) => {\n  const listItems = useListItemState();\n  const filteredListItems = listItems.filter(filterListItems);\n\n  if (isArrayEmpty(listItems)) {\n    return (\n      <Box mt={1.5}>\n        <Typography gutterBottom variant=\"h6\">\n          {noListItems}\n        </Typography>\n      </Box>\n    );\n  }\n\n  if (isArrayEmpty(filteredListItems)) {\n    return (\n      <Box mt={1.5}>\n        <Typography gutterBottom variant=\"h6\">\n          {noFilteredListItems}\n        </Typography>\n      </Box>\n    );\n  }\n\n  return (\n    <Box mt={1.5}>\n      <Grid container spacing={3}>\n        {filteredListItems.map(listItem => {\n          const { id } = listItem;\n          return (\n            <Grid key={id} item xs>\n              <BookCardVertical {...listItem} />\n            </Grid>\n          );\n        })}\n      </Grid>\n    </Box>\n  );\n};\n\nListItemList.propTypes = {\n  filterListItems: PropTypes.func.isRequired,\n  noListItems: PropTypes.node.isRequired,\n  noFilteredListItems: PropTypes.node.isRequired,\n};\n\nexport default ListItemList;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst Logo = ({ width = \"48\", height = \"48\" }) => {\n  return (\n    <svg\n      height={`${height}px`}\n      viewBox=\"0 0 48 48\"\n      width={`${width}px`}\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <title>Bookshelf</title>\n      <g>\n        <path\n          d=\"M12,5H2C1.44772,5,1,5.44772,1,6v27h12V6C13,5.44772,12.55229,5,12,5z\"\n          fill=\"#E86C60\"\n        />\n        <path\n          d=\"M12,43H2c-0.55228,0-1-0.44772-1-1V32h12v10C13,42.55228,12.55229,43,12,43z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M8,23H6c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55229,0,1,0.44771,1,1v11 C9,22.55228,8.55229,23,8,23z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M35.44301,3.67613l-9.68988,2.47109c-0.53516,0.13647-0.85835,0.68094-0.72188,1.2161l6.67194,26.16267 l11.62785-2.96531L36.6591,4.398C36.52263,3.86285,35.97816,3.53965,35.44301,3.67613z\"\n          fill=\"#43A6DD\"\n        />\n        <path\n          d=\"M44.83315,40.49766l-9.68988,2.47109c-0.53516,0.13647-1.07962-0.18672-1.21609-0.72188l-2.47109-9.68988 l11.62785-2.96531l2.47109,9.68987C45.69151,39.81672,45.36831,40.36118,44.83315,40.49766z\"\n          fill=\"#444444\"\n        />\n        <path\n          d=\"M36.01502,22.10634l-1.93797,0.49422c-0.53516,0.13647-1.07962-0.18672-1.2161-0.72188l-2.7182-10.65886 c-0.13647-0.53516,0.18672-1.07962,0.72188-1.2161L32.8026,9.5095c0.53516-0.13647,1.07962,0.18672,1.2161,0.72188l2.7182,10.65886 C36.87337,21.4254,36.55017,21.96987,36.01502,22.10634z\"\n          fill=\"#FFFFFF\"\n        />\n        <path\n          d=\"M24,5H14c-0.55229,0-1,0.44772-1,1v27h12V6C25,5.44772,24.55228,5,24,5z\"\n          fill=\"#E6E6E6\"\n        />\n        <path\n          d=\"M24,43H14c-0.55229,0-1-0.44772-1-1V32h12v10C25,42.55228,24.55228,43,24,43z\"\n          fill=\"#B3B3B3\"\n        />\n        <path\n          d=\"M20,23h-2c-0.55228,0-1-0.44772-1-1V11c0-0.55229,0.44772-1,1-1h2c0.55228,0,1,0.44771,1,1v11 C21,22.55228,20.55228,23,20,23z\"\n          fill=\"#FFFFFF\"\n        />\n      </g>\n    </svg>\n  );\n};\n\nLogo.propTypes = {\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nLogo.defaultProps = {\n  width: \"48\",\n  height: \"48\",\n};\n\nexport default Logo;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  IconButton,\n  InputBase,\n  makeStyles,\n  Paper,\n  Tooltip,\n} from \"@material-ui/core\";\nimport SearchIcon from \"@material-ui/icons/Search\";\n\n// Components\nimport ErrorMessage from \"./ErrorMessage\";\n\nconst useStyles = makeStyles({\n  root: {\n    padding: \"2px 4px\",\n    display: \"flex\",\n    alignItems: \"center\",\n    // width: 400,\n  },\n  input: {\n    marginLeft: 8,\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  },\n});\n\nconst SearchBar = ({\n  handleInputChange,\n  handleSearchClick,\n  isPending,\n  isRejected,\n  // eslint-disable-next-line react/prop-types\n  error,\n}) => {\n  const { root, input, iconButton } = useStyles();\n\n  return (\n    <>\n      <form onSubmit={handleSearchClick}>\n        <Paper className={root}>\n          <InputBase\n            className={input}\n            inputProps={{ \"aria-label\": \"search google maps\" }}\n            onChange={handleInputChange}\n            placeholder=\"Search books...\"\n          />\n          <Tooltip title=\"Search Books\">\n            <IconButton\n              aria-label=\"Search Books\"\n              className={iconButton}\n              type=\"submit\"\n            >\n              <SearchIcon />\n            </IconButton>\n          </Tooltip>\n        </Paper>\n      </form>\n      {isRejected && <ErrorMessage {...{ error }} />}\n    </>\n  );\n};\n\nSearchBar.propTypes = {\n  handleInputChange: PropTypes.func.isRequired,\n  handleSearchClick: PropTypes.func.isRequired,\n  isPending: PropTypes.bool.isRequired,\n  isRejected: PropTypes.bool.isRequired,\n};\n\nexport default SearchBar;\n","import BookCardHorizontal from \"./BookCard/BookCardHorizontal\";\nimport BookCardVertical from \"./BookCard/BookCardVertical\";\nimport BookNotes from \"./BookNotes\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport FullPageSpinner from \"./FullPageSpinner\";\nimport ListItemList from \"./ListItemList\";\nimport Logo from \"./Logo\";\nimport SearchBar from \"./SearchBar\";\nimport Spinner from \"./Spinner\";\n\nexport {\n  BookCardHorizontal,\n  BookCardVertical,\n  BookNotes,\n  ErrorMessage,\n  FullPageSpinner,\n  ListItemList,\n  Logo,\n  SearchBar,\n  Spinner,\n};\n"],"sourceRoot":""}